(()=>{"use strict";(()=>{const e=[{title:"Aqua Caelestis",src:"src/assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{title:"River Flows In You",src:"src/assets/sounds/River Flows In You.mp3",duration:"03:50"},{title:"Ennio Morricone",src:"src/assets/sounds/Ennio Morricone.mp3",duration:"01:37"}];console.log(e);const t=["en-US","ru-RU"];let n=t[0],o=["Minsk","Минск"];const c={"en-US":"Good","ru-RU":"Добрый"};let r=0,a=!1,s=0;const i=document.querySelector(".lang"),d=document.querySelector(".weather-icon"),l=document.querySelector(".temperature"),u=document.querySelector(".weather-description"),m=document.querySelector(".city"),g=document.querySelector(".quote"),h=document.querySelector(".author"),y=document.querySelector(".change-quote"),p=document.querySelector(".play"),S=document.querySelector(".play-next"),f=document.querySelector(".play-prev"),w=document.querySelector(".play-list"),q=new Audio;window.onload=function(){T(),R(),b(),document.querySelector(".slide-next").addEventListener("click",I),document.querySelector(".slide-prev").addEventListener("click",U),p.addEventListener("click",L),i.textContent=n,i.addEventListener("click",v)};const v=()=>{i.textContent=t.indexOf(i.textContent)===t.length-1?t[0]:t[t.indexOf(i.textContent)+1],n=i.textContent,m.value=o[t.indexOf(n)],C(),T(),k()};function L(){a?(q.pause(),a=!1):E(),p.classList.toggle("pause")}function E(){a=!0,q.src=e[s].src,e.forEach(((e,t)=>{w.children[t].classList.remove("item-active")})),w.children[s].classList.add("item-active"),q.currentTime=0,q.play()}function x(){s=s===e.length-1?0:s+1,E()}async function C(){const e=`https://api.openweathermap.org/data/2.5/weather?q=${m.value}&lang=${n.split("-")[0]}&appid=08f2a575dda978b9c539199e54df03b0&units=metric`,t=await fetch(e),o=await t.json();d.className="weather-icon owf",d.classList.add(`owf-${o.weather[0].id}`),l.textContent=`${o.main.temp}°C`,u.textContent=o.weather[0].description}q.addEventListener("ended",x),e.forEach((e=>{const t=document.createElement("li");t.classList.add("play-item"),t.textContent=e.title,w.append(t)})),S.addEventListener("click",x),f.addEventListener("click",(function(){s=0===s?e.length-1:s-1,E()}));const M=(e,t,n)=>{if(e=Math.ceil(e),t=Math.floor(t),"slider"!==n)return Math.floor(Math.random()*(t-e+1))+e;r=Math.floor(Math.random()*(t-e+1))+e};async function k(){const e=await fetch("http://localhost:5500/src/assets/data.json"),t=await e.json(),o=M(0,2,"quote");g.textContent=t[o][n].text,h.textContent=t[o][n].author}y.addEventListener("click",k),k(),document.addEventListener("DOMContentLoaded",C),m.addEventListener("keypress",(function(e){"Enter"===e.code&&(C(),m.blur())}));const $=()=>{const e=(new Date).getHours();return{"en-US":["morning","afternoon","evening","night"],"ru-RU":["утро","день","вечер","ночь"]}[n][Math.floor(e/6)-1]},b=()=>{const e=$();0===r&&M(1,20,"slider");const t=new Image;t.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${e}/${r.toString().padStart(2,"0")}.jpg`,t.onload=()=>{document.querySelector("body").style.backgroundImage=`url('${t.src}')`}},I=()=>{r=20===r?1:r+1,b()},U=()=>{r=1===r?20:r-1,b()};function R(){localStorage.getItem("name")&&(document.querySelector(".name").value=localStorage.getItem("name"))}window.addEventListener("beforeunload",(function(){const e=document.querySelector(".name");localStorage.setItem("name",e.value)})),window.addEventListener("onload",R);const T=()=>{const e=document.querySelector(".time"),t=document.querySelector(".date"),o=new Date,c=o.toLocaleTimeString(),r=o.toLocaleDateString(n,{weekday:"long",month:"long",day:"numeric"});e.innerHTML=c,t.innerHTML=r,setTimeout(T,1e3),document.querySelector(".greeting").textContent=j()},j=()=>"утро"===$()?"Доброе утро":`${c[n]} ${$()}`})()})();